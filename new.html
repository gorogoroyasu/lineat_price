<!DOCTYPE html>
<html lang="line price checker" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>line のお値段</title>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
    </head>
    <body>
        <h1>LINE's <a target="_blank" href="http://blog-at.line.me/archives/52626249.html">new price</a> will comming</h1>
        <p>this is an unofficial calculator of the monthly fee for using LINE's Service </p>
        <p><a href="index.html">old</a> !</p>
        <div id="app">
            <div>Message数</div>
            <input v-model="message_count" v-on:keyup="calc_price" placeholder="10000">
            <table>
                <tr>
                    <th width="200">フリー</th>
                    <th width="200">ライト</th>
                    <th width="200">スタンダード</th>
                </tr>
                <td>{{fprice}}</td>
                <td>{{lprice}}</td>
                <td>{{sprice}}</td>
            </table>
        </div>
        <script>
            var vm = new Vue({
                el: '#app',
                data: {
                    message_count: 0,
                    selected: "スタンダード",
                    fprice: 0,
                    lprice: 0,
                    sprice: 0
                },
                methods: {
                    calc_price: function (event) {
                        messages = Number(this.message_count)
                        console.log(messages);
                        if (messages > 1000000) {
                            this.fprice = "価格が公開されていません"
                            this.lprice = "価格が公開されていません"
                            this.sprice = "価格が公開されていません"
                            return
                        }
                        // fprice
                        if (messages > 1000) {
                            this.fprice = "送れません"
                        } else {
                            this.fprice = 0
                        }

                        l_free = 15000
                        this.lprice = 5000
                        if (messages > 15000) {
                            additional = messages - 15000
                            this.lprice += additional * 5
                        }

                        s_free = 45000
                        this.sprice = 15000

                        mc = messages
                        if ((mc - 45000) <= 0) {
                            return
                        }
                        mc -= 45000
                        if ((mc - 50000) <= 0) {
                            this.sprice += mc * 3.0
                            return
                        } else {
                            this.sprice += 50000 * 3.0
                        }
                        // 50000 - 100000
                        mc -= 50000
                        if ((mc - 50000) <= 0) {
                            this.sprice += mc * 2.8
                            return
                        } else {
                            this.sprice += 50000 * 2.8
                        }

                        mc -= 50000
                        l = [2.6, 2.4, 2.2, 2.0, 1.9, 1.8, 1.7, 1.6, 1.5]
                        for (var i in l) {
                            if ((mc - 100000) <= 0) {
                                this.sprice += mc * i
                                return
                            } else {
                                mc -= 100000
                                this.sprice = 100000 * i
                            }
                        }
                    },

                }
            })
        </script>
    </body>
</html>
